var a0_0x148866=a0_0x184b,a0_0x266d52=((()=>{for(var e=a0_0x184b,a=a0_0x56dd();;)try{if(671545==-parseInt(e(153))*(parseInt(e(447))/2)+-parseInt(e(355))/3+parseInt(e(438))/4*(parseInt(e(200))/5)+parseInt(e(403))/6*(parseInt(e(422))/7)+-parseInt(e(296))/8+-parseInt(e(169))/9*(-parseInt(e(238))/10)+parseInt(e(430))/11*(parseInt(e(205))/12))break;a.push(a.shift())}catch(e){a.push(a.shift())}})(),(()=>{var o=!0;return function(a,t){var e=o?function(){var e;if(t)return e=t[a0_0x184b(258)](a,arguments),t=null,e}:function(){};return o=!1,e}})()),a0_0x4aba89=a0_0x266d52(this,function(){var e=a0_0x184b;return a0_0x4aba89[e(187)]().search(e(384))[e(187)]().constructor(a0_0x4aba89).search("(((.+)+)+)+$")}),detalleLineasContenedoreses=(a0_0x4aba89(),[]);function validarBusquedaContenedor(){enviarDatosControlador()}function enviarDatosControlador(){var e=a0_0x184b;armarTablaLectura(detalleLineasContenedoreses=dataContenedores),guardarTablaEnArray(),armarTablaVerificacion(detalleLineasContenedoreses),mostrarPestanaLectura(),console[e(293)]("REsultados:"),console[e(293)](detalleLineasContenedoreses),Swal.fire({icon:e(476),title:e(307),text:e(323),confirmButtonColor:e(371)})}function mostrarPestanaLectura(){var e=a0_0x184b;document[e(194)]('#tabs-swipe-demo a[href="#tabla-lectura"]')[e(401)](),document[e(378)](e(338)).focus()}function limpiarResultadoGeneral(){var e=a0_0x184b,a=document[e(378)](e(386)),t=document[e(378)](e(365)),o=document[e(378)](e(156));t&&(t[e(445)]=""),o&&(o[e(445)]=""),a&&(t=a[e(194)](e(141)))&&(t[e(445)]="")}function limpiarTblLectura(){var e=a0_0x184b,a=document.getElementById(e(423));(a=a&&a[e(194)](e(141)))&&(a[e(445)]="")}function a0_0x56dd(){var e=["Est√° intentando borrar una fila vacia","colspan",".cantidadPreparada","initial","Se dividir√°n en ","onclick","descripcion","LineaConsecutivo","resultadoPaginador","üì¶ Enviando lote ","appendChild"," es mayor a la solicitada.","button","#pContenedor","#28a745","placa-camion",'" onchange="guardarTablaEnArray(this)">\n                </td>\n                <td class="codigo-barras-cell2" style="text-align: center;">\n                <i class="material-icons red-text" style="cursor: pointer;" onclick="eliminarFila(this)">clear</i>\n                </td>\n            ',"Cancelar","text","beforeend","Se cre√≥ el paquete N¬∞ ","getElementById","wmsmostarbodegasconsultaordencompra","&pArticulo=","getAttribute","Todos los datos fueron Guardados correctamente","internal","(((.+)+)+)+$","question","tblcontenedores","nextSibling","&pOpcion=R&pBodegaOrigen=","&pOpcion=c&pBodegaEnvia=","btnCrearPaqueteContenedor","createElement","contrase√±a","Respuesta","Error","¬øDesea procesar el contenedor?","&pOpcion=L&pBodegaOrigen=","jspdf","toISOString",'" placeholder="0" style="width: 80px;"></td>\n      </tr>\n    ',"replace","click","</h6></td>\n        <td>","762heMcsu","startsWith","join","isDismissed","Permisos","Devolver Art√≠culo","push"," no tiene registros de lectura."," / ","trim","CANT_LEIDA",'\n            <td class="solicitud" hidden>',"warning","guardacreapaquete","</h5><h6>","focus","?pSistema=WMS&pUsuario=","Contenedor","setAttribute","47803wiYmqg","myTableLectura","hUsuario","üö® Error al enviar lote ",".solicitud","pContenedor","map","json","5970063HSxDGt","Credenciales inv√°lidas","JOSENAVA","CANT\nPREP.","fire","Continuar","Autorizacion Resultado: ","Traslado","24rAICnL","jsonPaquete=\n","Articulo","&pOpcion=D&BodegaSolic=","add","Aprobar","rows","innerHTML","Se registro un error en la llamada al API","1506758pVTICb","No se encontraron bodegas.","El art√≠culo ","querySelectorAll","span","readonly","mensajes"," es menor a la solicitada.","¬°Articulo sin Existencias!","LineaAprobada","CREACI√ìN DE PAQUETES","green","tfoot","Error: No se pudieron obtener los valores de usuario y contrase√±a del Swal","input","S√≠, devolver","25px","permiso  no consedido","PARAMETROS: ","carga","CANT\nVERIF.","&pPlaca=",".codigo-barras-input","PAQUETE: ","save","No se pudieron obtener los valores de usuario y contrase√±a del Swal","wrap","#6e7881",".contenedor h5","info","&pOpcion=",'</h6>\n            </td>\n            <td class="articulo">\n                <h5 class="verifica-articulo">\n                    <span class="blue-text text-darken-2">',".devolver-input","btnGuardar","progresoLecturaLabel","LineaVerificada","auto","div","tbody","msg","</p>\n    ","setFont","&pBodegaEnvia=","Ocurrio un error al cargar las lineas para devoluci√≥n","cells","getItem","white","codigos_barras","Se gener√≥ el pdf","#007bff","1rSWORD","S√≠, eliminar","', '","totalregistros","Codigo_Barra","Respuesta del API:\n","&pUsuarioAutorizacion=","hidden","jsPDF","respuesta","Sin Art√≠culo","Cant_Verificada","6em","marginTop","&pUsuario=","toLocaleString","27csPZlj","devolverarticulocontenedor","split","&pComentario=Comentario o null","center","El API no devolvio nada","Cant_Leida","warn","swal-input2","&jsonPaquete=&pReferencia="," de ","helvetica","marginRight","length","\n      <tr>\n        <td><h5>","N/A","get","Crear Paquete","toString","&pFecha=","No se pudo obtener los datos del API","</b>?</p>\n      <p>Contenedor: <b>",'\n                <td>\n                    <span style="display: block; text-align: center;">',"from","matches","querySelector","color","100px","Error al obtener los datos del API:","hasOwnProperty","every","339070QSJyNX","¬øA continuaci√≥n se guardaran los datos leidos de la pesta√±a verificaci√≥n...?","style","mensajeText","swal-input1","24wZVeEO","isConfirmed","Cerrar",'" onchange="validarCodigoBarras(this)" autofocus>\n                </td>\n                <td class="codigo-barras-cell2" style="text-align: center;">\n                    <input id="cant-pedida" style="text-align: center;" type="text" class="codigo-barras-input" value="',"Le√≠do: ","user","pUsuario","left","addEventListener","catch","success"," lotes de 20 (√∫ltimo puede ser menor)","tblbodyLineasContenedor","&BodegaEnvia=","detallesARRAY:\n ","val","CONSECUTIVO\nCONTENEDOR","option","Art√≠culo no encontrado","Params:\n","setItem","</b></p>\n      <p>Cantidad preparada: <b>","*La cantidad verificada del art√≠culo ","width","getWidth","usuario","value","#tblbodyLectura",".cantidadPedida","removeItem","‚úÖ Lote ","toFixed",'</h6>\n            </td>\n            <td class="cantidadPedida" style="text-align: left;">\n                ',"3426510GgKSnv","(min-width: 64em)","dataArray","CANT\nSOLI","C√ìDIGO\nBARRAS","SUCCESS"," procesado","BODEGA","centered","pageSize",'</span>\n                </td>\n                <td class="codigo-barras-cell" style="text-align: center;">\n                    <input id="codigo-barras" type="text" class="codigo-barras-input" value="',"REFERENCIA",".codigo-barras-cell2","16px","ERROR_API","Aceptar","¬°C√≥digo no v√°lido!","CANTIDAD_LEIDA","stringify","borderRadius","apply","display","textContent","&pTipoConsulta=l&pPaquete=","forEach","&pBodegaDestino=","¬øEst√°s seguro?","height","</b></p>\n      <p>Cantidad le√≠da: <b>","&jsonPaquete=",".cantidadLeida","Articulo devuelto correctamente","La referencia ","parametrosBusquedaPaquete","&pEstado=&pFechaDesde=","500px","getElementsByTagName","setFontSize","Respuesta del SP","pFechaDesde","td:first-child","&pContenedor=","parentNode","pOpcion","Cant_Pedida","No se encontraron la tabla o el cuerpo de la tabla de verificaci√≥n.","bodega","‚ö†Ô∏è Error en lote ","then","√ëagare","normal","parse","FECHA\nCREACI√ìN","wmsautorizaciones",'\n    <table class="highlight centered" style="width: 100%; border-collapse: collapse;">\n      <thead>\n        <tr>\n          <th>Contenedor</th>\n          <th>Cant. Preparada</th>\n          <th>Cant. a Devolver</th>\n        </tr>\n      </thead>\n      <tbody>',"log","ARTICULO","error","8694992DYduCi","...","remove","200px","marginLeft",">La cantidad verificada del art√≠culo ","textAlign","36px","Guardar","TOTALES:","ART√çCULO","Informaci√≥n","ERROR_EXCEEDS","classList",'</td>\n        <td><input type="number" min="0" class="devolver-input" data-index="',"filter","verificadordecontenedores","A continuaci√≥n se va a eliminar una fila de la pesta√±a lectura","slice","autorizacion","done_all","Error al cargar las bodegas:","Cami√≥n: ","Cantidad de registros: ","backgroundColor","\n      <p>¬øEst√°s seguro de devolver el art√≠culo <b>","application/json","Registros cargados en la pesta√±a Verificaci√≥n",".verifica-articulo span","bodegaSelect","Fin...",".codigo-barras-cell","&jsonDetalles=","tblbodyLectura","‚ö†Ô∏è No se encontr√≥ la tabla de verificaci√≥n.","API_URL","El c√≥digo ingresado no coincide con ning√∫n art√≠culo de la solicitud. Intente nuevamente.","Total de registros a enviar: ","Reporte_Paquete_","insertBefore","Ingrese sus credenciales","</b></p>\n      <hr>\n      <p><b>Diferencia a devolver:</b> ","codigo-barras","#fecha_ini","L√≠neas para devoluci√≥n - Art√≠culo: ","matchMedia",'<option value="" disabled selected>Seleccione una bodega</option>',"mensaje","insertAdjacentHTML","permiso consedido","tr:last-child .codigo-barras-input","toUpperCase","closest","5px",'<input id="swal-input1" class="swal2-input" placeholder="Usuario" autocomplete="off"><input id="swal-input2" class="swal2-input" placeholder="Contrase√±a" type="password" autocomplete="off">',".pdf","init","Respuesta Contenedor",".verificado","2627364OUWAuw",'</span>\n                </h5>\n                <h6 style="text-align:left;">'];return(a0_0x56dd=function(){return e})()}function cargarBodegas(){var a=a0_0x184b;fetch(env.API_URL+a(379))[a(286)](e=>e[a(429)]()).then(e=>{var o=a;let n=document.getElementById(o(325));e.respuesta&&Array.isArray(e[o(162)])?(n[o(445)]=o(342),e[o(162)][o(262)](e=>{var a=o,t=document[a(391)](a(222));t[a(231)]=e[a(245)],t[a(260)]=e.NOMBRE,n[a(367)](t)}),M.FormSelect[o(352)](n)):console[o(295)](o(448))})[a(214)](e=>console[a(295)](a(317),e))}function armarTablaLectura(e){var o=a0_0x184b,n=document[o(378)]("tblbodyLectura");n[o(309)].add(o(259),o(246)),n[o(445)]="",e.forEach(function(e){var a,t=o;null!=e[t(175)]&&""!==e[t(175)]&&0!=e.Cant_Leida&&((a=document.createElement("tr"))[t(445)]=t(191)+e[t(440)]+t(248)+(e[t(157)]||"")+t(208)+(e[t(175)]||"")+t(373),n[t(367)](a))}),guardarTablaEnArray(),crearNuevaFila()}function validarCodigoBarras(a){for(var t=a0_0x184b,o=detalleLineasContenedoreses,n=a[t(231)].toUpperCase(),r=a[t(348)]("tr"),l=r[t(194)](t(278))[t(194)]("span"),i=r.querySelector(t(250))[t(194)](".codigo-barras-input"),c=!1,s=0;s<o.length;s++){let e=[];if(o[s][t(150)]&&(e=o[s][t(150)][t(171)]("|")[t(428)](e=>e[t(347)]())),o[s][t(440)]&&o[s][t(440)][t(347)]()===n||o[s].Codigo_Barra&&o[s].Codigo_Barra[t(347)]()===n||e.includes(n)){if(0<o[s].total_cedi){l[t(260)]=o[s][t(440)],i[t(231)]=1,a[t(421)]("readonly",t(452)),crearNuevaFila(),guardarTablaEnArray(),c=!0;break}Swal[t(434)]({icon:t(415),title:t(455),text:t(270)+o[s].Articulo+" no cuenta con existencias",confirmButtonColor:t(371)}),c=!0,r[t(194)](".codigo-barras-cell").querySelector(t(469))[t(231)]="";break}}c||(r.querySelector(t(327)).querySelector(".codigo-barras-input")[t(231)]="",Swal[t(434)]({icon:t(415),title:t(254),text:t(332),confirmButtonColor:"#28a745"}))}function crearNuevaFila(){var e=a0_0x184b,a=document[e(194)](e(232));a.classList.add("display",e(246)),a[e(344)](e(376),'<tr>\n            <td class="sticky-column" style="text-align: center;" style="user-select: none;"><span display: inline-block;"></span></td>\n            <td class="codigo-barras-cell" style="text-align: center;"><input type="text" style="text-align: center;" id="codigo-barras" class="codigo-barras-input" value="" onchange="validarCodigoBarras(this)" autofocus></td>\n            <td class="codigo-barras-cell2" style="text-align: center;"><input id="cant-pedida" style="text-align: center;" type="text" class="codigo-barras-input" value="" onchange="actualizaLectura(this)"></td>\n            <td class="codigo-barras-cell2" style="text-align: center;"><i class="material-icons red-text" style="cursor: pointer;" onclick="eliminarFila(this)">clear</i></td>\n        </tr>'),(a=a.querySelector(e(346)))&&a[e(418)]()}function actualizaLectura(){guardarTablaEnArray()}function guardarTablaEnArray(){for(var e=a0_0x184b,a=[],t=document[e(378)]("myTableLectura").getElementsByTagName("tr"),o=1;o<t[e(182)];o++){var n=(l=t[o][e(274)]("td"))[0][e(194)](e(451)).textContent.trim(),r=l[1][e(194)](".codigo-barras-input"),l=l[2].querySelector(e(469)),r=r[e(231)],l=parseFloat(l.value);null===n||""===n||isNaN(l)||a.push({ARTICULO:n,CODIGO_BARRA:r,CANTIDAD_LEIDA:l})}return localStorage[e(225)](e(240),JSON.stringify(a)),agrupar(),actualizarProgresoLectura(),a}function agrupar(){var e,o=a0_0x184b,a=JSON.parse(localStorage.getItem(o(240)))||[],n={},t=(a.forEach(function(e){var a=o,t=e[a(294)],e=e[a(255)];n.hasOwnProperty(t)?n[t]+=e:n[t]=e}),[]);for(e in n)n[o(198)](e)&&t[o(409)]({ARTICULO:e,CANTIDAD_LEIDA:n[e]});localStorage[o(225)](o(240),JSON.stringify(t))}function a0_0x184b(e,a){var t=a0_0x56dd();return(a0_0x184b=function(e,a){return t[e-=138]})(e,a)}function eliminarFila(e){var a=a0_0x184b,n=e[a(348)]("tr");Swal[a(434)]({title:a(264),text:a(313),icon:a(415),showCancelButton:!0,confirmButtonColor:a(371),cancelButtonColor:"#6e7881",confirmButtonText:a(154)}).then(e=>{var t,o=a;e[o(206)]&&(t=!0,e=n.querySelectorAll(".codigo-barras-input"),n[o(194)],e[o(262)](function(e){var a=o;""!==e.value[a(412)]()&&(t=!1)}),t?(guardarTablaEnArray(),Swal[o(434)]({icon:o(415),title:o(357),confirmButtonText:o(207)})):(n[o(298)](),(e=document[o(194)](o(232))[o(194)](o(346)))&&e[o(418)](),guardarTablaEnArray()))})}function limpiarMensajes(){var e=a0_0x184b;localStorage[e(234)](e(453)),document[e(378)](e(203))[e(231)]="",guardarTablaEnArray()}function calcularTotalUnidadesApreparar(){var t=a0_0x184b,e=document[t(378)](t(217));let o=0;return e&&e[t(450)]("tr").forEach(e=>{var a=t;(e=e.querySelectorAll("td"))[4]&&(e=e[4][a(260)][a(412)](),o+=parseFloat(e)||0)}),o}function calcularTotalUnidadesLeidas(){var o=a0_0x184b,e=document[o(378)](o(329));let n=0;return e&&e.querySelectorAll("tr")[o(262)](e=>{var a,t=o;(e=e[t(450)]("td"))[2]&&(a=(a=e[2][t(194)](t(461)))?a[t(231)]:e[2][t(260)][t(412)](),n+=parseFloat(a)||0)}),n}function actualizarProgresoLectura(){var e=a0_0x184b,a=calcularTotalUnidadesApreparar(),t=calcularTotalUnidadesLeidas(),o=document[e(378)](e(481));o?(o.textContent=e(209)+t[e(236)](0)+e(411)+a[e(236)](0),o[e(202)][e(195)]=e(0<t&&a<=t?458:360)):console[e(176)]("Elemento 'progresoLecturaLabel' no encontrado. Aseg√∫rate de agregarlo al HTML.")}function armarTablaVerificacion(e){var o=a0_0x184b;let n=document[o(378)](o(217));n[o(445)]="",e.sort((e,a)=>{var t=o;return(e=e.Contenedor)<(a=a[t(420)])?-1:a<e?1:0}),document[o(378)]("cantidadDeRegistros")[o(260)]=o(319)+e[o(182)],e[o(262)](e=>{var a=o,t=document[a(391)]("tr");t[a(445)]=a(414)+e[a(437)]+'</td>\n            <td class="contenedor" style="text-align: left;">\n                <h5>'+e[a(420)]+"</h5>\n                <h6>"+e[a(437)]+a(478)+e[a(440)]+a(356)+e.Descripcion+a(237)+(isNaN(parseFloat(e[a(282)]))?0:parseFloat(e[a(282)])[a(236)](2))+'\n            </td>\n            <td class="cantidadPreparada" style="text-align: left;">\n                '+(isNaN(parseFloat(e[a(164)]))?0:parseFloat(e[a(164)])[a(236)](2))+'\n            </td>\n            <td class="cantidadLeida" style="text-align: left;"></td>\n            <td class="verificado" style="text-align: left;"></td>\n            <td class="devolver" style="text-align: left;">\n                <i class="material-icons"\n                    style="color: #FF0000; cursor: pointer;"\n                    onclick="autorizaDevolucion(\''+e.Articulo+a(155)+e[a(420)]+"','"+(isNaN(parseFloat(e[a(164)]))?0:parseFloat(e[a(164)]).toFixed(2))+"')\">reply</i>\n            </td>\n            ",n[a(367)](t)})}function verificacion(){var l=a0_0x184b,e=JSON[l(289)](localStorage.getItem("dataArray"))||[],a=(console.log("DataArray",e),document[l(378)](l(386)));if(!a)return console[l(176)](l(330));a=a[l(450)]("tbody tr");let i=[],c=(a.forEach(e=>{var a=l,t=e[a(194)](a(268)),e=e[a(194)](a(354));t&&(t[a(260)]=""),e&&(e[a(260)]="")}),{});e[l(262)](e=>{var a=l,a=e.ARTICULO[a(412)](),e=parseFloat(e.CANTIDAD_LEIDA)||0;c[a]=(c[a]||0)+e}),a[l(262)](e=>{var a,t=l,o=e[t(194)](".verifica-articulo span"),n=e.querySelector(".cantidadPreparada"),r=e[t(194)](t(268)),e=e[t(194)](t(354));o&&n&&(o=o.textContent[t(412)](),n=parseFloat(n.textContent)||0,a=c.hasOwnProperty(o)?c[o]:null,r&&(r[t(260)]=a),a===n&&0<a?e&&((r=document[t(391)]("span"))[t(309)][t(442)]("material-icons"),r[t(260)]=t(316),r[t(202)][t(195)]=t(458),e.appendChild(r)):n<a?(r=(a-n)[t(236)](2),e&&(e[t(260)]="+"+r),i[t(409)](t(227)+o+t(368))):a<n&&0<a&&(r=(a-n).toFixed(2),e&&(e[t(260)]=r),i.push(t(301)+o+t(454))))}),calcularTotalesVerificacion(),localStorage[l(225)](l(453),JSON[l(256)](i)),limpiarMensajes(),(e=document[l(378)](l(203)))&&(e[l(231)]=i.join("\n"))}function inicializarBotones(){var e=a0_0x184b,a=document[e(391)]("div"),t=document.createElement(e(140)),o=document[e(391)]("button"),n=document.createElement(e(369)),r=document[e(391)](e(369)),l=(r[e(260)]="Guardar",r.id="btnGuardar",r[e(160)]=!1,r.onclick=confirmarGuardadoParcial,o[e(260)]=e(186),o.id=e(390),o[e(160)]=!1,o[e(362)]=guardaPaquete,n[e(260)]=e(304),n.id=e(480),n.hidden=!1,n.onclick=confirmarGuardadoParcial,r[e(202)][e(320)]="#28a745",r[e(202)][e(257)]=e(349),r.style[e(195)]=e(149),r.style[e(166)]="16px",r[e(202)][e(300)]=e(251),r[e(202)][e(181)]=e(251),r.style[e(265)]=e(303),r.style.width="100px",n[e(202)][e(320)]=e(371),n[e(202)][e(257)]=e(349),n[e(202)][e(195)]=e(149),n[e(202)][e(166)]=e(251),n.style.marginLeft="16px",n[e(202)][e(181)]="16px",n[e(202)][e(265)]="36px",n.style.width=e(196),o[e(202)][e(228)]="100px",o[e(202)].backgroundColor="#28a745",o[e(202)][e(257)]="5px",o.style[e(195)]=e(149),o[e(202)][e(166)]=e(251),o[e(202)][e(300)]=e(165),o[e(202)][e(265)]="40px",o[e(202)].marginbottom=e(463),a[e(367)](r),t[e(367)](n),t[e(367)](o),document[e(378)](e(423))),i=document.getElementById(e(386));l[e(280)].insertBefore(a,l[e(387)]),i[e(280)][e(335)](t,i.nextSibling),(a=window[e(341)](e(239)))[e(193)]&&(r[e(202)][e(300)]=e(299),n.style[e(300)]=e(299),o.style.marginLeft=e(273))}function mostrarMensajesLocalStorage(){var a=a0_0x184b,e=localStorage[a(148)](a(453));if(e){var t=JSON.parse(e),o=document[a(378)](a(203));o[a(231)]="";for(let e=0;e<t[a(182)];e++)o[a(231)]+=t[e]+"\n"}}function confirmarGuardadoParcial(){var e=a0_0x184b;Swal[e(434)]({icon:"info",title:e(201),showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:e(374),confirmButtonColor:e(371),cancelButtonColor:e(474)})[e(286)](e=>{e.isConfirmed&&guardaParcialMente()})}async function guardaParcialMente(){var t=a0_0x184b,e=document[t(378)](t(424))[t(231)],o=document.getElementById("bodega")[t(231)],n=document[t(378)](t(325))[t(231)],r=(new Date)[t(398)]().split("T")[0],l=document.getElementById("placa-camion")[t(231)],a=document[t(378)](t(386)),i=[];for(let e=1;e<a[t(444)][t(182)];e++){var c=(m=a[t(444)][e])[t(194)](t(475))?.textContent[t(412)]()||"0",s=m[t(194)](t(426))?.textContent[t(412)]()||"0",d=m[t(194)](t(324))?.[t(260)][t(412)]()||"",u=Number(m.querySelector(t(233))?.[t(260)][t(412)]()||0),p=Number(m.querySelector(t(359))?.[t(260)][t(412)]()||0),m=Number(m[t(194)](t(268))?.[t(260)].trim()||0);i[t(409)]({CONTENEDOR:c,SOLICITUD:s,ARTICULO:d,CANT_CONSEC:u,CANT_PREPARADA:p,CANT_LEIDA:m})}console[t(293)](t(219),i);var f=[];for(let e=0;e<i.length;e+=20)f[t(409)](i[t(314)](e,e+20));var g={method:"GET",headers:{"Content-Type":t(322)}};for(let a=0;a<f[t(182)];a++){var C=JSON[t(256)](f[a]),v="?pSistema=WMS&pUsuario="+e+t(396)+o+t(263)+n+t(188)+r+"&pPlaca="+l+t(267)+C+"&pReferencia=Ref o null&pComentario=Comentario o null";console.log("PARAMETROS: "+v),console.log("üì¶ Enviando lote "+(a+1)+t(179)+f[t(182)]+"..."),console.log("jsonPaquete=\n",C),console[t(293)]("Fin...");try{var b=await(await fetch(env[t(331)]+t(416)+v,g))[t(429)]();if(console[t(293)](t(235)+(a+1)+t(244),b),t(243)!==b[t(142)]){console[t(176)](t(285)+(a+1),b);break}}catch(e){console[t(295)](t(425)+(a+1)+":",e);break}}Swal[t(434)]({icon:t(215),title:t(382),confirmButtonText:"Aceptar",confirmButtonColor:t(371),cancelButtonColor:"#6e7881"})[t(286)](e=>{e[t(206)]&&mostrarPestanaLectura()})}async function guardaPaquete(){var t=a0_0x184b,e=document.getElementById(t(424)).value,o=document[t(378)]("bodega")[t(231)],n=document[t(378)](t(325))[t(231)],r=(new Date)[t(398)]()[t(171)]("T")[0],l=document.getElementById(t(372))[t(231)],a=document[t(378)](t(386)),i=[];for(let e=1;e<a[t(444)].length;e++){var c=(m=a[t(444)][e])[t(194)](t(475))?.[t(260)][t(412)]()||"0",s=m[t(194)](t(426))?.[t(260)].trim()||"0",d=m.querySelector(t(324))?.[t(260)][t(412)]()||"",u=Number(m[t(194)](t(233))?.[t(260)].trim()||0),p=Number(m[t(194)](t(359))?.[t(260)][t(412)]()||0),m=Number(m.querySelector(t(268))?.[t(260)][t(412)]()||0);i[t(409)]({CONTENEDOR:c,SOLICITUD:s,ARTICULO:d,CANT_CONSEC:u,CANT_PREPARADA:p,CANT_LEIDA:m})}console[t(293)](t(219),i),console[t(293)](t(333)+i[t(182)]);var f=[];for(let e=0;e<i[t(182)];e+=20)f[t(409)](i[t(314)](e,e+20));console.log(t(361)+f.length+t(216));var g={method:"GET",headers:{"Content-Type":"application/json"}};for(let a=0;a<f[t(182)];a++){var C=JSON.stringify(f[a]),v="?pSistema=WMS&pUsuario="+e+"&pOpcion=L&pBodegaOrigen="+o+t(263)+n+"&pFecha="+r+t(468)+l+t(267)+C+"&pReferencia=Ref o null&pComentario=Comentario o null";console[t(293)](t(465)+v),console[t(293)](t(366)+(a+1)+t(179)+f[t(182)]+t(297)),console[t(293)](t(439),C),console[t(293)](t(326));try{var b=await(await fetch(env.API_URL+t(416)+v,g))[t(429)]();if(console.log(t(235)+(a+1)+t(244),b),t(243)!==b[t(142)]){console[t(176)](t(285)+(a+1),b);break}}catch(e){console[t(295)](t(425)+(a+1)+":",e);break}}console[t(293)]("Se guardaron los elementos de la tabla lectura y se va a crear el paquete."),ConfirmaCrearPaqueteContenedores()}function ConfirmaCrearPaqueteContenedores(){var t=a0_0x184b;Swal[t(434)]({icon:t(415),title:t(395),showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar",confirmButtonColor:t(371),cancelButtonColor:t(474)})[t(286)](e=>{var a=t;e.isConfirmed&&(validarVerificacion()?CrearPaqueteContenedores():Swal[a(434)]({title:a(336),html:a(350),focusConfirm:!1,showCancelButton:!0,confirmButtonText:a(443),cancelButtonText:"Cancelar",confirmButtonColor:a(371),cancelButtonColor:a(474),preConfirm:()=>({usuario:document[a(378)](a(204))[a(231)][a(347)](),"contrase√±a":document.getElementById("swal-input2")[a(231)]})})[a(286)](e=>{var t=a;!e[t(406)]&&e[t(231)]&&e[t(231)].usuario&&e[t(231)][t(392)]?(e=t(419)+e[t(231)].usuario+t(477)+e[t(231)][t(392)],fetch(env[t(331)]+"wmsautorizaciones"+e)[t(286)](e=>e[t(429)]())[t(286)](e=>{var a=t;console.log(a(436)),console[a(293)](e[a(315)][0].mensaje),"OK"===e.autorizacion[0][a(343)]?(console.log("Credenciales v√°lidas"),CrearPaqueteContenedores()):(console[a(293)](a(431)),Swal[a(434)]({icon:"error",title:a(394),text:"Credenciales inv√°lidas"}))}).catch(e=>{var a=t;console[a(295)]("Error al obtener los datos del API:",e),Swal[a(434)]({icon:a(295),title:"Error",text:a(189)})})):(console[t(295)](t(460)),Swal[t(434)]({icon:t(295),title:t(394),text:t(472)}))}))})}function CrearPaqueteContenedores(){var a=a0_0x184b,e="?pSistema=WMS&pUsuario="+document[a(378)](a(424))[a(231)]+a(388)+document.getElementById(a(284))[a(231)]+a(263)+document[a(378)](a(325)).value+"&pFecha="+(new Date)[a(398)]()[a(171)]("T")[0]+a(468)+document[a(378)](a(372)).value+a(178)+document[a(378)](a(427))[a(231)]+a(172);console[a(293)](a(224)+e),fetch(env[a(331)]+a(416)+e,myInit)[a(286)](e=>e[a(429)]())[a(286)](e=>{var t=a;if(console[t(293)](t(276)),console[t(293)](e[t(162)]),t(243)===e.msg)if(0!=e[t(162)][t(182)]){let a=e.respuesta[0][t(393)];console[t(293)](t(158)+e[t(162)][0][t(393)]),e[t(162)][0][t(393)][t(347)]()[t(404)]("TRAS")?Swal[t(434)]({icon:"success",title:t(377)+a+" con √©xito",showDenyButton:!0,confirmButtonText:t(253),denyButtonText:"Imprimir",confirmButtonColor:"#28a745",denyButtonColor:t(152),cancelButtonColor:t(474)})[t(286)](e=>{e[t(206)]||e.isDenied&&imprimirPaqueteReporte(a)}):Swal[t(434)]({icon:t(295),title:e.respuesta[0][t(393)],confirmButtonText:t(253),confirmButtonColor:t(371)})}else console[t(293)](t(174))})}document[a0_0x148866(213)]("DOMContentLoaded",function(){cargarBodegas()}),document[a0_0x148866(194)]('a[href="#tabla-verificacion"]')[a0_0x148866(213)](a0_0x148866(401),mostrarMensajesLocalStorage);let validarVerificacion=()=>{var t=a0_0x148866,e=document[t(450)]("#tblbodyLineasContenedor tr");return 0!==e[t(182)]&&Array[t(192)](e)[t(199)](e=>{var a=t;return!!(e=e[a(147)][6])&&a(316)===e.querySelector(".material-icons")?.[a(260)]?.[a(412)]()})};function columnaEstaVacia(){for(var e=a0_0x148866,a=document.querySelectorAll("#tblbodyLineasContenedor td#cantidadLeida"),t=0;t<a[e(182)];t++)if(""!==a[t][e(260)][e(412)]())return!1;return!0}function permisoCrearPaquete(){let e=a0_0x148866,a=sessionStorage[e(148)](e(210))?.[e(412)]()||"";e(432)===(a=a[e(400)](/^["'](.*)["']$/,"$1"))?Swal[e(434)]({icon:"info",title:e(407),text:e(345),showCancelButton:!0,confirmButtonText:e(435),cancelButtonText:"Cancelar",confirmButtonColor:e(371),cancelButtonColor:e(474)}):Swal[e(434)]({icon:"info",title:e(287),text:e(464),showCancelButton:!0,confirmButtonText:e(435),cancelButtonText:e(374),confirmButtonColor:e(371),cancelButtonColor:e(474)})}async function imprimirPaqueteReporte(e){var n=a0_0x148866,a=document[n(378)](n(424))[n(231)];let r=e;e=n(419)+a+n(261)+r,console[n(293)](n(224)+e),fetch(env[n(331)]+"imprimepaquete"+e,myInit)[n(286)](e=>e[n(429)]())[n(286)](e=>{var a,t,o=n;o(243)===e[o(142)]&&0<e[o(162)][o(182)]&&(console[o(293)]("REPORTE CREACION DE PAQUETE",e.respuesta),(a=new(a=window[o(397)][o(161)])("P","pt","a4"))[o(275)](16),a[o(144)]("helvetica","bold"),a[o(375)](o(457),a[o(383)][o(247)][o(229)]()/2,40,{align:o(173)}),a[o(275)](14),a[o(144)](o(180),o(288)),a.text(o(470)+r,a[o(383)][o(247)][o(229)]()/2,60,{align:"center"}),a[o(275)](12),a[o(375)](o(318)+(e.respuesta[0][o(249)]||o(184)),40,90),t=[o(306),o(242),o(241),o(433),o(467),o(221),o(290)],e=e[o(162)][o(428)](e=>[e.articulo+"\n"+e[o(363)],e[o(157)],e[o(364)],e[o(456)],e[o(138)],e[o(420)],e.Fecha_Aplicacion]),a.autoTable({head:[t],body:e,startY:140,styles:{fontSize:8,cellWidth:o(473)},headStyles:{fillColor:[40,167,69]},tableWidth:o(139),columnStyles:{0:{cellWidth:120}}}),console[o(293)](o(151)),a[o(471)](o(334)+r+o(351)))})}function autorizaDevolucion(o,n,r){var a=a0_0x148866;Swal[a(434)]({title:a(336),html:a(350),focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Aprobar",cancelButtonText:"Cancelar",confirmButtonColor:a(371),cancelButtonColor:a(474),preConfirm:()=>({usuario:document.getElementById(a(204))[a(231)][a(347)](),"contrase√±a":document.getElementById(a(177))[a(231)]})})[a(286)](e=>{var t=a;!e[t(406)]&&e[t(231)]&&e[t(231)][t(230)]&&e[t(231)][t(392)]&&(e="?pSistema=WMS&pUsuario="+e[t(231)][t(230)]+t(477)+e.value[t(392)],fetch(env[t(331)]+t(291)+e)[t(286)](e=>e[t(429)]()).then(e=>{var a=t;console[a(293)]("Autorizacion Resultado: "),console[a(293)](e[a(315)][0].mensaje),"OK"===e[a(315)][0][a(343)]?(console[a(293)]("Credenciales v√°lidas"),devolverArticulo(o,n,r)):(console[a(293)](a(431)),Swal[a(434)]({icon:a(295),title:a(394),text:a(431)}))}).catch(e=>{var a=t;console[a(295)](a(197),e),Swal.fire({icon:a(295),title:"Error",text:"No se pudo obtener los datos del API"})}))})}function devolverArticulo(a,e,t){var o,n=a0_0x148866,r=(JSON[n(289)](localStorage.getItem(n(240)))||[]).find(e=>e.ARTICULO[n(412)]()[n(347)]()===a.trim()[n(347)]());r?(r=parseFloat(r[n(255)])||0,o=(t=parseFloat(t)||0)-r,Swal.fire({title:n(408),html:n(321)+a+n(190)+e+n(226)+t[n(236)](2)+n(266)+r[n(236)](2)+n(337)+o.toFixed(2)+n(143),icon:n(385),showCancelButton:!0,confirmButtonText:n(462),cancelButtonText:"Cancelar",confirmButtonColor:n(371),cancelButtonColor:n(474)})[n(286)](e=>{var t=n;e.isConfirmed&&(e=t(419)+document[t(378)](t(424))[t(231)]+t(389)+document[t(378)]("bodega")[t(231)]+"&pBodegaDestino="+document.getElementById(t(325)).value+t(279)+$(t(370))[t(220)]()+t(272)+$(t(339))[t(220)]()+t(380)+a,localStorage[t(225)]("parametrosBusquedaContenedor",e),fetch(env[t(331)]+t(312)+e,myInit)[t(286)](e=>e.json())[t(286)](e=>{var a=t;"SUCCESS"===e.msg?(detalleLineasContenedoreses=e[a(162)],0!=e.respuesta[a(182)]?mostrarTablaEnSwal(detalleLineasContenedoreses):Swal[a(434)]({icon:a(476),title:a(307),text:a(146),confirmButtonColor:a(371)}),document[a(378)](a(466))[a(445)]=""):Swal[a(434)]({icon:a(295),title:a(295),text:a(446),confirmButtonColor:a(371)})}))})):Swal[n(434)]({title:n(223),text:n(449)+a+n(410),icon:n(415),confirmButtonText:n(253),confirmButtonColor:n(474)})}async function mostrarTablaEnSwal(r){var t=a0_0x148866,e=document.getElementById(t(424)).value,a=document[t(378)]("bodega")[t(231)],o=localStorage[t(148)]("bodega_solicita"),n=localStorage[t(148)]("UsuarioAutorizacion")||"",l=document.getElementById("pContenedor").value;let i=r[0]?.[t(440)]||t(163);var c=r[t(428)]((e,a)=>t(183)+(e[t(420)]||"")+t(417)+(e[t(437)]||"")+t(402)+Number(e[t(164)]||0)[t(236)](2)+t(310)+a+t(399))[t(405)]("");if(c=(await Swal.fire({title:t(340)+i,html:t(292)+c+"</tbody>\n    </table>\n  ",icon:t(476),confirmButtonText:t(253),confirmButtonColor:"#28a745",showCancelButton:!0,cancelButtonText:t(374),preConfirm:()=>{var n=t,e=document[n(450)](n(479));return Array.from(e)[n(428)](e=>{var a=n,t=parseInt(e[a(381)]("data-index")),e=parseFloat(e.value)||0,o=Number(r[t][a(164)]||0);if(o<e)throw new Error(MESSAGES[a(308)](r[t][a(420)]));return{index:t,CONTENEDOR:r[t][a(420)],SOLICITUD:r[t].Traslado,ARTICULO:i,CANT_PREPARADA:o,CANT_LEIDA:e}})[n(311)](e=>0<e[n(413)])}}))[t(231)]){e="?pSistema=WMS&pUsuario="+e+t(441)+o+t(218)+a+t(159)+n+t(328)+JSON.stringify(c[t(428)](({CONTENEDOR:e,SOLICITUD:a,ARTICULO:t,CANT_PREPARADA:o,CANT_LEIDA:n})=>({CONTENEDOR:e,SOLICITUD:a,ARTICULO:t,CANT_PREPARADA:o,CANT_LEIDA:n})))+"pContenedor="+l;try{await enviarCantidadesDevolucion(e)}catch(e){Swal[t(434)]({icon:t(295),title:t(394),text:MESSAGES[t(252)],confirmButtonColor:"#28a745"})}}}async function enviarCantidadesDevolucion(e){var t=a0_0x148866;fetch(env[t(331)]+t(170)+e,myInit).then(e=>e[t(429)]())[t(286)](e=>{var a=t;console.log("Respuesta del SP"),console.log(e[a(162)]),console.log(a(353)),console[a(293)](e),a(243)===e.msg&&0!=e[a(162)][a(182)]&&Swal[a(434)]({icon:a(215),title:a(269),confirmButtonText:"Aceptar",confirmButtonColor:a(371),cancelButtonColor:a(474)})[a(286)](e=>{e[a(206)]&&actualizaTablaVerificacion()})})}function actualizaTablaVerificacion(){var e,a=a0_0x148866,t=localStorage[a(148)](a(271));t&&(e="?pSistema="+((e=new URLSearchParams(t))[a(185)]("pSistema")??"")+a(167)+(e[a(185)](a(211))??"")+a(477)+(e[a(185)](a(281))??"")+a(145)+(e[a(185)]("pBodegaEnvia")??"")+a(263)+e.get("pBodegaDestino")+a(279)+(e[a(185)](a(427))??"")+a(272)+(e[a(185)](a(277))??"")+"&pArticulo=",console[a(293)](""+t),console[a(293)]("PARAMSET"+e),enviarDatosControlador(e))}function calcularTotalesVerificacion(){var l=a0_0x148866,t=document[l(378)](l(386)),o=document[l(378)](l(217));if(t&&o){let a=[3,4,5,6],r=a[l(428)](()=>0),e=(o[l(450)]("tr").forEach(e=>{var o=l;let n=e[o(450)]("td");a[o(262)]((e,a)=>{var t=o;n[e]&&(e=n[e][t(260)][t(412)](),e=parseFloat(e)||0,r[a]+=e)})}),t[l(194)](l(459))),n=(e&&e[l(298)](),e=document[l(391)]("tfoot"),document[l(391)]("tr"));n.style.fontWeight="bold",n[l(202)][l(320)]="#f0f0f0",(o=document.createElement("td"))[l(260)]=l(305),o[l(421)](l(358),2),o.style[l(302)]=l(173),n[l(367)](o),a.forEach((e,a)=>{var t=l,o=document[t(391)]("td");o[t(260)]=r[a][t(168)](),o[t(202)][t(302)]=t(212),n.appendChild(o)}),o=document[l(391)]("td"),n[l(367)](o),e[l(367)](n),t[l(367)](e)}else console[l(295)](l(283))}window.onload=function(){inicializarBotones(),guardarTablaEnArray()};